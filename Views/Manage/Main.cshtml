 
@{ 
    Layout = "_Layout"; 
} 
 
<!DOCTYPE html> 
<html lang="en"> 
 
<head> 
    <link rel="stylesheet" type="text/css" src="~/css/sweetalert2.min.css">
    <script src="~/js/sweetalert2.all.min.js"></script>
    <script src="~/js/sweetalert2.min.js"></script>

  <meta charset="utf-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> 
  <title>หน้าแรก</title> 
  <script> 
        $(document).ready(function () { 
            var currentdate = new Date(); 
            var getdate = "วันที่ " + currentdate.getDate() + "/" + (currentdate.getMonth() + 1) + "/" + currentdate.getFullYear() + " " + currentdate.getHours() + ":" 
                + currentdate.getMinutes() + ":" 
                + currentdate.getSeconds() + " น." 
            $.ajax({
                type: "post",
                url: "../Renter/getRenter?oid=" + @ViewBag.Oid,
                dataType: 'json',
                success: function (result) {
                    $("#Renter").text(result);
                    $("#renter1update").text(getdate);
                }
            }); 
 
            $.ajax({
                type: "post",
                url: "../Renter/getRenter0?oid=" + @ViewBag.Oid,
                dataType: 'json',
                success: function (result) {
                    $("#Renter0").text(result);
                    $("#renter0update").text(getdate);
                }
            }); 

            
            $.ajax({ 
                type: "post", 
                url: "../Income/IncomeAll?oid=" + @ViewBag.Oid, 
                dataType: 'json', 
                success: function (result) { 
                   var in_all= new Intl.NumberFormat({ style: 'currency', currency: 'THB' }).format(result)
                    $("#Income").text(in_all); 
                    $("#Incomeupdate").text(getdate); 
                } 
            }); 
 
            $.ajax({ 
                type: "post", 
                url: "../Income/GetExt?oid=" + @ViewBag.Oid, 
                dataType: 'json', 
                success: function (result) { 
                    var in_ext = new Intl.NumberFormat({ style: 'currency', currency: 'THB' }).format(result)
                    $("#IncomeExt").text(in_ext); 
                    $("#IncomeExtupdate").text(getdate); 
                } 
            }); 
 
        }); 
    </script> 
</head> 
 
<body> 
    <div class="main-panel"> 
        <div class="content-wrapper"> 
            <div class="row"> 
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 grid-margin stretch-card"> 
                    <div class="card card-statistics"> 
                        <div class="card-body"> 
                            <div class="clearfix"> 
                                <div class="float-left"> 
                                    <i class="mdi mdi-cube text-danger icon-lg"></i> 
                                </div> 
                                <div class="float-right"> 
                                    <p id="incomeall" class="mb-0 text-right">รายได้รวมเดือนล่าสุด</p> 
                                    <div class="fluid-container"> 
                                        <h3 id="Income" class="font-weight-medium text-right mb-0">฿0</h3> 
                                        <p class="mb-0 text-right">บาท</p> 
                                    </div> 
                                </div> 
                            </div> 
                            <p class="text-muted mt-3 mb-0"> 
                                <i class="mdi mdi-bookmark-outline mr-1" aria-hidden="true"></i> ข้อมูลล่าสุด 
                            </p> 
                                <p id="Incomeupdate" class="text-muted mt-3 mb-0"> 
                            </p> 

                        </div> 
                    </div> 
                </div> 
                        <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 grid-margin stretch-card"> 
                    <div class="card card-statistics"> 
                        <div class="card-body"> 
                            <div class="clearfix"> 
                                <div class="float-left"> 
                                    <i class="mdi mdi-account-location text-info icon-lg"></i> 
                                </div> 
                                <div class="float-right"> 
                                    <p class="mb-0 text-right">คาดการณ์รายได้เดือนหน้า</p> 
                                    <div class="fluid-container"> 
                                        <h3 id="IncomeExt" class="font-weight-medium text-right mb-0">฿0</h3> 
                                        <p class="mb-0 text-right">บาท</p> 
                                    </div> 
                                </div> 
                            </div> 
                            <p class="text-muted mt-3 mb-0"> 
                                <i class="mdi mdi-bookmark-outline mr-1" aria-hidden="true"></i> ข้อมูลล่าสุด 
                            </p> 
                            <p id="IncomeExtupdate" class="text-muted mt-3 mb-0"> 
                    
                            </p> 
                        </div> 
                    </div> 
                </div> 
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 grid-margin stretch-card"> 
                    <div class="card card-statistics"> 
                        <div class="card-body"> 
                            <div class="clearfix"> 
                                <div class="float-left"> 
                                    <i class="mdi mdi-account-card-details text-success icon-lg"></i> 
                                </div> 
                                <div class="float-right"> 
                                    <p class="mb-0 text-right">จำนวน ผู้เช่า</p> 
                                    <div class="fluid-container"> 
                                        <h3 id="Renter" class="font-weight-medium text-right mb-0">0</h3> 
                                        <p class="mb-0 text-right">คน</p> 
                                    </div> 
                                </div> 
                            </div> 
                            <p class="text-muted mt-3 mb-0"> 
                                <i class="mdi mdi-bookmark-outline mr-1" aria-hidden="true"></i> ข้อมูลล่าสุด 
                                  </p> 
                            <p id="renter1update" class="text-muted mt-3 mb-0"> 
                            </p> 
                        </div> 
                    </div> 
                </div> 
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 grid-margin stretch-card"> 
                    <div class="card card-statistics"> 
                        <div class="card-body"> 
                            <div class="clearfix"> 
                                <div class="float-left"> 
                                    <i class="mdi mdi-poll-box text-success icon-lg"></i> 
                                </div> 
                                <div class="float-right"> 
                                    <p class="mb-0 text-right">จำนวน ห้องว่าง</p> 
                                    <div class="fluid-container"> 
                                        <h3 id="Renter0" class="font-weight-medium text-right mb-0">0</h3> 
                                        <p class="mb-0 text-right">ห้อง</p> 
                                    </div> 
                                </div> 
                            </div> 
                            <p class="text-muted mt-3 mb-0"> 
                                <i class="mdi mdi-calendar mr-1" aria-hidden="true"></i> ข้อมูลล่าสุด 
                                  </p> 
                            <p id="renter0update" class="text-muted mt-3 mb-0"> 

                            </p> 
                        </div> 
                    </div> 
                </div> 
        
            </div> 

 
            <div class="row"> 
                @foreach (var dorm in ViewBag.dorms) 
                { 
                    <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 grid-margin stretch-card"> 
                        <div class="card card-statistics"> 
                            <div class="card-body"> 
                                <div class="clearfix"> 
                                    <div class="align-items-center"> 
                                        <div class="fluid-container"> 
                                            @{ 
                                                if (@dorm.picture != "") 
                                                { 
                                                    <img class="Cir" width="100%" height="100%" src="~/uploads/img_mansion/@dorm.picture" /><br /><br /> 
                                                } 
                                                else 
                                                { 
                                                    <img class="Cir" width="100%" height="100%" src="~/uploads/blank_img.png" /><br /><br /> 
                                                } 
                                            } 
                                            <h4 class="font-weight-medium text-right mb-0 text-center display-4">@dorm.Name</h4> 
                                            <br /> 

                                            <div class="row"> 
                                                <div class="col-md-6"> 
                                                    <h5 class="template-demo">ที่อยู่ :@dorm.Add_no</h5> 
                                                </div> 
                                                <div class="col-md-6"> 
                                                    <h5 class="template-demo">ถนน : @dorm.Street</h5> 
                                                </div> 
                                            </div> 
                                            <div class="row"> 
                                                <div class="col-md-6"> 
                                                    <h5 class="template-demo">ตำบล : @dorm.sub_District</h5> 
                                                </div> 
                                                <div class="col-md-6"> 
                                                    <h5 class="template-demo">อำภอ : @dorm.District</h5> 
                                                </div> 
                                            </div> 
                                            <div class="row"> 
                                                <div class="col-md-6"> 
                                                    <h5 class="template-demo">จังหวัด : @dorm.Province</h5> 
                                                </div> 
                                                <div class="col-md-6"> 
                                                    <h5 class="template-demo">ไปรษณีย์ : @dorm.Zip_code</h5> 
                                                </div> 
                                            </div> 
 
                                            <div class="text-center template-demo"> 
                                                <form method="post"> 
                                                    <input type="text" name="did" hidden="hidden" value="@dorm.Did"/> 
                                                    <button type="submit" class="btn btn-1 btn-primary btn-rounded btn-block btn-fw" asp-controller="Renter" asp-action="ShowRoom">ดูข้อมูลผู้เช่า</button> 
                                                    <button type="submit" class="btn btn-1 btn-success btn-rounded btn-block btn-fw" asp-controller="Income" asp-action="RevenueDorm">ดูรายได้ย้อนหลัง</button> 
                                                    <button type="submit" class="btn btn-1 btn-danger btn-rounded btn-block btn-fw" asp-controller="Income" asp-action="ExtrapolateDorm">ดูคาดการณ์รายได้</button>  
                                                </form> 
 
                                            </div> 
                                        </div> 
                                    </div> 
                                </div> 
 
                            </div> 
                        </div> 
 
                    </div> 
                } 
 
 
 
 
 
                </div> 
 
        </div> 
 
    </div> 
    <script> 
        function showRoom() { 
                window.location.href = '@Url.Action("ShowRoom", "Renter")' 
        } 
    </script> 
</body> 
 
</html> 

